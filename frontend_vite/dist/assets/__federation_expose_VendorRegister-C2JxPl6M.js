import{importShared as _}from"./__federation_fn_import-33DeJCMj.js";import{j as e}from"./jsx-runtime-BLchON5X.js";const{useState:o}=await _("react"),u=[{id:"delivery_method",text:"How do you deliver your products to customers?",placeholder:"e.g., Mail service, local delivery, courier..."},{id:"physical_store",text:"Do you have a physical store? If so, where?",placeholder:"e.g., Yes, in Porto / No, online only."},{id:"packaging",text:"How do you package your products?",placeholder:"e.g., Recyclable packaging, custom boxes..."},{id:"return_policy",text:"What is your return policy?",placeholder:"e.g., 14 days for return, full refund..."},{id:"production_capacity",text:"How many products can you produce per month?",placeholder:"e.g., 50 units, made to order..."}];function P({onSuccess:h,onCancel:g}){const[r,N]=o({name:"",owner_name:"",email:"",phone:"",country:"",tax_id:"",website:"",about:""}),[n,f]=o({}),[c,p]=o(!1),[x,d]=o(null),[b,y]=o(!1),t=s=>{N({...r,[s.target.name]:s.target.value})},v=(s,i)=>{f({...n,[s]:i})},w=()=>{if(!r.name.trim())return"Store name is required";if(!r.owner_name.trim())return"Owner name is required";if(!r.email.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email))return"Invalid email";for(const s of u)if(!n[s.id]||n[s.id].trim().length<10)return`Please answer the question: "${s.text}" (minimum 10 characters)`;return null},C=async s=>{s.preventDefault(),d(null);const i=w();if(i){d(i);return}p(!0);try{const a=u.map(m=>({question_id:m.id,question_text:m.text,answer:n[m.id]})),l={...r,questions:a},j=await fetch("http://localhost:8000/api/vendors/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),S=await j.json();if(!j.ok)throw new Error(S.detail||"Registration failed");y(!0),h&&setTimeout(()=>h(),2e3)}catch(a){let l="Error submitting registration. Please try again.";a instanceof Error?l=a.message||l:typeof a=="string"&&(l=a),d(l)}finally{p(!1)}};return b?e.jsx("div",{className:"container register-success",children:e.jsxs("div",{className:"register-card",children:[e.jsx("h2",{className:"register-success-title",children:"âœ“ Registration Submitted Successfully!"}),e.jsx("p",{className:"register-success-message",children:"Your registration request has been received and will be reviewed by our team."}),e.jsx("p",{className:"register-success-detail",children:"You will receive an email shortly with the verification result."})]})}):e.jsxs("div",{className:"container register-container",children:[e.jsxs("header",{className:"register-header",children:[e.jsx("h1",{className:"register-title",children:"Vendor Registration"}),e.jsx("p",{className:"register-subtitle",children:"Fill out the form below to register as an artisan seller"})]}),x&&e.jsxs("div",{className:"register-error",children:[e.jsx("span",{className:"register-error-icon","aria-hidden":"true",children:"âš ï¸"})," ",x]}),e.jsxs("form",{className:"register-form",onSubmit:C,children:[e.jsxs("section",{className:"register-section",children:[e.jsxs("h2",{className:"register-section-title",children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ“"})," Store Information"]}),e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Store Name / Brand *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:t,placeholder:"e.g., Artisan Crafts Co.",required:!0,className:"register-input"})]}),e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Website (optional)"}),e.jsx("input",{type:"url",name:"website",value:r.website,onChange:t,placeholder:"https://www.example.com",className:"register-input"})]}),e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Store Description (optional)"}),e.jsx("textarea",{name:"about",value:r.about,onChange:t,placeholder:"Briefly describe your store and products...",rows:3,className:"register-textarea"})]})]}),e.jsxs("section",{className:"register-section",children:[e.jsxs("h2",{className:"register-section-title",children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ‘¤"})," Contact Information"]}),e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Owner Name *"}),e.jsx("input",{type:"text",name:"owner_name",value:r.owner_name,onChange:t,placeholder:"Your full name",required:!0,className:"register-input"})]}),e.jsxs("div",{className:"register-row",children:[e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:t,placeholder:"your@email.com",required:!0,className:"register-input"})]}),e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Phone (optional)"}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:t,placeholder:"+351 912 345 678",className:"register-input"})]})]}),e.jsxs("div",{className:"register-row",children:[e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Country (optional)"}),e.jsx("input",{type:"text",name:"country",value:r.country,onChange:t,placeholder:"Portugal",className:"register-input"})]}),e.jsxs("div",{className:"register-field",children:[e.jsx("label",{className:"register-label",children:"Tax ID (optional)"}),e.jsx("input",{type:"text",name:"tax_id",value:r.tax_id,onChange:t,placeholder:"123456789",className:"register-input"})]})]})]}),e.jsxs("section",{className:"register-section",children:[e.jsxs("h2",{className:"register-section-title",children:[e.jsx("span",{"aria-hidden":"true",children:"âœ…"})," Verification Questions"]}),e.jsx("p",{className:"register-section-desc",children:"Please answer the following questions to help our team verify your profile."}),u.map((s,i)=>e.jsxs("div",{className:"register-field",children:[e.jsxs("label",{className:"register-label",children:[i+1,". ",s.text," *"]}),e.jsx("textarea",{value:n[s.id]||"",onChange:a=>v(s.id,a.target.value),placeholder:s.placeholder,rows:3,required:!0,className:"register-textarea"}),e.jsx("small",{className:"register-hint",children:"Minimum 10 characters"})]},s.id))]}),e.jsxs("div",{className:"register-actions",children:[g&&e.jsx("button",{type:"button",onClick:g,disabled:c,className:"register-btn cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"register-btn submit-btn",children:c?"Submitting...":"Submit Registration"})]})]}),e.jsx("footer",{className:"register-footer",children:e.jsx("p",{children:"By submitting this form, you agree to our terms and conditions."})})]})}export{P as default};
